<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ | NFC Lock</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="tg-app">
        <div class="header">
            <h1 id="userName">–ü—Ä–∏–≤–µ—Ç!</h1>
            <div class="lock-status" id="lockStatus">üîí –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω</div>
        </div>

        <div class="nfc-area">
            <div class="nfc-icon">üì±</div>
            <div class="nfc-hint" id="nfcHint">–ü—Ä–∏–ª–æ–∂–∏—Ç–µ —Ç–µ–ª–µ—Ñ–æ–Ω –∫ –∑–∞–º–∫—É</div>
        </div>

        <button class="action-btn" id="actionBtn">–ó–∞–∫—Ä—ã—Ç—å</button>
        <button class="btn-logout" id="logoutBtn">–í—ã–π—Ç–∏</button>
    </div>

    <script>
        // –ü–æ–ª—É—á–∞–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ URL
        const urlParams = new URLSearchParams(window.location.search);
        let userName = urlParams.get('name');
        let userHash = urlParams.get('hash');

        // –ï—Å–ª–∏ –Ω–µ—Ç –≤ URL, –±–µ—Ä–µ–º –∏–∑ localStorage
        if (!userName || !userHash) {
            const userData = localStorage.getItem('nfcUser');
            if (userData) {
                const user = JSON.parse(userData);
                userName = user.name;
                userHash = user.hash;
            } else {
                window.location.href = 'index.html';
            }
        }

        // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
        document.getElementById('userName').textContent = `–ü—Ä–∏–≤–µ—Ç, ${userName || '–î—Ä—É–≥'}!`;

        // –õ–æ–≥–∏–∫–∞ –∑–∞–º–∫–∞
        let isLocked = true;
        document.getElementById('actionBtn').onclick = function() {
            isLocked = !isLocked;
            const btn = document.getElementById('actionBtn');
            const status = document.getElementById('lockStatus');
            const hint = document.getElementById('nfcHint');
            
            if (isLocked) {
                btn.textContent = '–ó–∞–∫—Ä—ã—Ç—å';
                btn.classList.remove('active');
                status.textContent = 'üîí –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω';
                hint.textContent = '–ü—Ä–∏–ª–æ–∂–∏—Ç–µ —Ç–µ–ª–µ—Ñ–æ–Ω –∫ –∑–∞–º–∫—É';
            } else {
                btn.textContent = '–û—Ç–∫—Ä—ã—Ç—å';
                btn.classList.add('active');
                status.textContent = 'üîì –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω';
                hint.textContent = '–ì–æ—Ç–æ–≤ –∫ NFC';
                setTimeout(() => hint.textContent = '–ö–ª—é—á —Å–æ—Ö—Ä–∞–Ω—ë–Ω!', 800);
            }
        };

        // –í—ã—Ö–æ–¥
        document.getElementById('logoutBtn').onclick = function() {
            localStorage.removeItem('nfcUser');
            window.location.href = 'index.html';
        };
    </script>
</body>
</html>